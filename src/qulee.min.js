!function(n){"use strict";n.qjs=new function n(){var u=[],t=[],e=null,i=!1,o=!1,c={onQueue:[],onDequeue:[],onArchive:[],onDuplicate:[],onLock:[]};function h(n,u){n.forEach(function(n){n(u)})}this.enqueue=function(n){return i?h(c.onLock,n):!o&&u.indexOf(n)>-1?h(c.onDuplicate,n):(u.push(n),h(c.onQueue,n)),this},this.dequeue=function(){return e=u.shift(),h(c.onDequeue,e),e},this.clear=function(){u=[]},this.current=function(){return e},this.archive=function(){e&&(t.push(e),h(c.onArchive,e))},this.lock=function(){i=!0},this.unlock=function(){i=!1},this.size=function(n){return n?this[n].size():u.length},this.last=function(){return u.length?u[u.length-1]:this.current()},this.createNamedQueue=function(u){return this[u]=new n},this.setAllowDuplicate=function(n){o=!!n},this.onQueue=function(n){c.onQueue.push(n)},this.onDequeue=function(n){c.onDequeue.push(n)},this.onLock=function(n){c.onDuplicate.push(n)},this.onLock=function(n){c.onDuplicate.push(n)}}}(window||global);