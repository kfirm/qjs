!function(n){"use strict";n.qjs=new function n(){var u=[],e=[],t=null,i=!1,o={onQueue:[],onDequeue:[],onArchive:[],onDuplicate:[],onLock:[]};function c(n,u){n.forEach(function(n){n(u)})}this.enqueue=function(n){return i?c(o.onLock,n):u.indexOf(n)>-1?c(o.onDuplicate,n):(u.push(n),c(o.onQueue,n)),this},this.dequeue=function(){return t=u.shift(),c(o.onDequeue,t),t},this.clear=function(){u=[]},this.current=function(){return t},this.archive=function(){t&&(e.push(t),c(o.onArchive,t))},this.lock=function(){i=!0},this.unlock=function(){i=!1},this.size=function(n){return n?this[n].size():u.length},this.last=function(){return u.length?u[u.length-1]:this.current()},this.initNamedQueue=function(u){this[u]=new n},this.onQueue=function(n){o.onQueue.push(n)},this.onDequeue=function(n){o.onDequeue.push(n)}}}(window||global);